==============================
Welcome to Freeciv 3.0.0-beta3
==============================

The changes in the 3.0.x series are summarised below.
For changes prior to 3.0, see NEWS. For more detailed changes,
see the ChangeLog file.


CHANGES FROM 3.0.0-beta2 to 3.0.0-beta3
---------------------------------------

   (from <http://www.freeciv.org/wiki/NEWS-3.0.0-beta3>, 2021-10-08)

3.0.0-beta3 fixes some issues still seen with beta2, and is expected
to be the last beta release before stable 3.0.0 release.

Server / General
Changes affecting players (supplied rulesets)

    * Ransom is given for each barbarian leader when there's more
      than one in the same tile (but no other units to defend them).
      The old behavior was not to give ransom at all as they were
      considered to be defending each other. osdn#42020
    * Fixed server setting tradeworldrelpct to affect also
      the initial one time bonus of the trade route. osdn#42097
    * Server correctly informs client when loading a savegame fails.
      It used to always claim that load was succesfull to the client
      osdn#42189
    * Game refuses paradropping to a tile with known enemy unit
      as that would only be certain death for the paradropping unit
      HRM#869995 osdn#42433 osdn#42434 osdn#42435
    * Fixed a bug that when player providing shared vision was removed,
      the vision would remain for the other players HRM#883225
    * Corrected bribe cost of units with build cost not multiple of ten.
      Especially this makes bribe cost of units with build cost
      less than ten not to be zero. HRM#929034
    * Avoid server getting stuck when loading ruleset that has
      unit obsoletion loop osdn#42301
    * Fixed loading a savegame with multiresearch server setting
      turned on osdn#42499
    * Fixed server crash when number of cities and units in the game
      is larger than 65534 HRM#927510

    * civ2civ3 & sandbox
         + Ships with zero attack power no longer cause unhappiness,
           fighters with fuel over one turn do osdn#42078
         + civ2civ3 only Welcome message points directs user to find
           more information from About Current Ruleset osdn#42329
         + Reworked the way labels get assigned to the map
           when it's generated osdn#42708

    * civ1
         + Made traderoute one-time-bonus gold only osdn#42317
         + Savepalace server setting is disabled by default osdn#42266

    * civ2
         + Savepalace server setting is disabled by default osdn#42266

    * alien
         + Clean format by always setting irrigation_time / plant_time
           to zero when the activity in question is disabled by
           relevant _result field. This does not change how
           the ruleset behaves, but is less confusing to read osdn#42211

    * italy scenario
         + Wrap map from the correct point so that leftmost part
           of the map is connected to the rest HRM#691812

    * british isles scenario
         + Scenario now uses nationset all, so the correct nations
           from the isles are available and get placed,
           instead of completely random nations from the core nationset
           osdn#42939

Changes affecting other rulesets / modders

    * Terrain transform time of zero now really disables transforming,
      as documented osdn#42120
    * When action success probability range to show is calculated,
      TerrainAlter requirements are known to be known for sure osdn#42512
    * Fixed handling of multipliers (especially one with value of zero)
      in relation to space part effects osdn#42836
    * Sanity check that space parts have Special genus HRM#824590
    * Update city owner's info on clients when caravan
      helps finish foreign wonder HRM#908746
    * Fixed helptext trouble with CityTile requirements involved osdn#42872
    * CoastStrict units can now enter Ocean cities,
      and cities on 1x1 islands (with no surrounding land tile) osdn#42600

General

    * Minor optimizations osdn#42331 osdn#42865 osdn#42883
    * Various internal changes which should only affect developers
      osdn#42117 osdn#42171 osdn#42142 osdn#42146 osdn#42192 osdn#42151
      osdn#42325 osdn#42043 osdn#41947 osdn#42438 osdn#42340 HRM#909607
      osdn#42421 osdn#42461 osdn#42456 osdn#42527 osdn#42330 osdn#42477
      osdn#42505 osdn#42505 osdn#42460 osdn#42504 osdn#42455 osdn#42623
      osdn#42488 osdn#42577 osdn#42779 osdn#42557 osdn#42843 osdn#42579
      osdn#42835 osdn#42841 osdn#42868 osdn#42227 osdn#42886

AI

    * AI puts more weight on potential improvement's
      gold effect (including upkeep) when it's short of gold osdn#42195
    * Corrected actual AI's use of advisor when it's
      evaluating governments osdn#42231
    * Stopped fueled units from unnecessary hopping between bases
      when they should regenerate HRM#924328
    * Fixed rare AI crash when tech upkeep was enabled and a player
      had researched zero techs osdn#42409
    * AI can again build Fighters (units with fuel of one) HRM#658896
    * Fixed a problem causing fueled ferries to get stuck osdn#41970
    * Fixed a problem causing AI to think its income is lower
      than it actually is, when it plans for a balanced budget osdn#42193
    * Increased AI's want to conquer cities that
      have no buildings at all osdn#42778
    * Improved handling of caravans that can only enter marketplace,
      not establish trade routes osdn#42518
    * Corrected AI's estimate of immediate bonus of establishing
      a trade route when bonus type is not "Both" osdn#42641

Clients

    * Don't promise that there's a one time trade bonus
      when there is not osdn#42087
    * Improved indentation of entries in the left panel
      of the city dialog osdn#42298
    * Fixed handling of the change of tile that action selection
      is waited for osdn#42621 osdn#42622
    * Consistently disable help links to space parts when
      spacerace disabled HRM#853869
    * Fixed a crash when drawing a trade route,
      and the trade partner is unknown osdn#42969

    * gtk3 & gtk3.22
         + Make sure scrollbar does not hide rightmost column
           in units and economy reports osdn#42167
         + gtk3.22 only: Get information from correct display
           on multi-display setup when user interacts with
           city's improvement list. It used to always assume
           default display. osdn#42183
         + gtk3.22 only: Made tab notice color different
           from alert color osdn#42295
         + Fixed pillaging of the default target osdn#42168
         + Fixed loading unit to the default transport osdn#42303

Tools
Ruledit

    * Improvements when ruledit compiled in experimental mode
      for having item removal support
         + Removal of dependant items was erronously blocked
           by already removed items osdn#42173
         + Display name of the action requiring the object
           that one tries to remove osdn#42464
    * New editable properties:
         + Unit attack and defense value osdn#42386
         + Improvement upkeep osdn#42487
    * Display enabler count in ruleset stats osdn#42176

Modpack installer

    * freeciv-mp-gtk4 now quits cleanly osdn#42412
    * freeciv-mp-gtk4 no longer claims to support standard
      gtk commandline options, that gtk4 does not have osdn#42415

Ruleup

    * Make 2.6 resources turned to extras generator placed osdn#42847
    * Make sure extra.buildable is always saved when it
      has a nondefault value osdn#42848

Tilesets, Art, etc

    * Added graphics for Castle HRM#919768 osdn#42440
    * Fixed amplio2 default city and city_wall sprites to be blank osdn#42441
    * Corrected/updated flag file formats
      osdn#42163 osdn#42188 osdn#42208 osdn#42255 osdn#42267 osdn#42291
      osdn#42300 osdn#42308 osdn#42315 osdn#42326 osdn#42339 osdn#42345
      osdn#42370 osdn#42378 osdn#42384 osdn#42393 osdn#42399 osdn#42404
      osdn#42410 osdn#42418 osdn#42432 osdn#42442 osdn#42444 osdn#42463
      osdn#42469 osdn#42472 osdn#42475 osdn#42481 osdn#42489 osdn#42496
      osdn#42503 osdn#42507 osdn#42519 osdn#42521 osdn#42526 osdn#42530
      osdn#42535 osdn#42542 osdn#42546 osdn#42550 osdn#42559 osdn#42564
      osdn#42566 osdn#42570 osdn#42576 osdn#42590 osdn#42596 osdn#42603
      osdn#42604 osdn#42608 osdn#42615 osdn#42619 osdn#42636 osdn#42765
      osdn#42718 osdn#42770

Help / Documentation

    * Freenode network has been replaced by Libera.Chat network
      as the official freeciv IRC channel osdn#42541
    * Made man page links to work in MacOS osdn#42178
    * Added man page freeciv osdn#42138
    * Document new freeciv-tickets mailing list for developers osdn#42491
    * Miscellaneous improvements to in-game text and user documentation
      osdn#42260 osdn#42207 osdn#42337 osdn#42119 osdn#42403 osdn#42558
      osdn#42539 osdn#42392 osdn#42782 osdn#42652
    * Miscellaneous changes to developer/install/ruleset docs
      osdn#42126 osdn#42143 osdn#42217 osdn#42373 osdn#42411 osdn#42318
      osdn#42842 osdn#42844 osdn#42695 osdn#42918 osdn#42926

Translations

    * Updated translations:
    * Updated translations:
         + Complete translations: Catalan, Russian
         + Incomplete translations:
           Esperanto (29% core, 17% nations, 35% ruledit)
           Finnish (100% core, 91% nations, 100% ruledit)
           French (99% core, 100% nations, 98% ruledit)

Build/portability
    * Make sure that freeciv's configuration header does not cause
      trouble when building liblua as part of freeciv.
      Problems were reported specifically in MacOS build.
      By default liblua is not built, but existing library is used
      from the system. osdn#42114
    * Fixed MacOS build problem where files documenting Version
      of dependencies was mistaken for a system header osdn#42271
    * Respect user set MOCCMD on MacOS build osdn#42342
    * Fixed build on older OSX versions osdn#42439
    * Qt meta object source generation now respects
      automake's silent mode osdn#42458
    * Crosser environment used in crosser based Windows installers
      updated to version 2.1 osdn#42607 osdn#42067
    * Fixed compiler warning with clang-13 osdn#42698
    * Avoid use of depracated 'which' command in scripts osdn#42769
    * Silenced false-positive gcc-12 compiler warning osdn#42885


CHANGES FROM 3.0.0-beta1 to 3.0.0-beta2
---------------------------------------

   (from <http://www.freeciv.org/wiki/NEWS-3.0.0-beta2>, 2021-05-14)

3.0.0-beta2 fixes a number of issues seen with beta1. These include that
alien ruleset gets correctly installed, and important change to
civ2civ3 (default) ruleset that Diplomats or Explorers establishing
an embassy are consumed in the process.

Server / General
Changes affecting players (supplied rulesets)

    * Update a city also on other player's clients when its size get
      reduced because of a nuke osdn#41810 osdn#41860
    * Made generated random seed less predictable on most platforms.
      Compared to earlier released 2.6.4, here also Windows and
      older Linux are supported. HRM#914184 osdn#41838 osdn#41842
      osdn#41995 osdn#42000 osdn#41918 osdn#42024
    * Allow goto to a moving transport (but not through one) HRM#647612
    * Air unit goto avoids wait for refuel when it's not necessary
      HRM#923677 osdn#42029
    * Server does not send city info to clients in the middle of calculations
      where the info might be inconsistent osdn#41851 osdn#41975
    * When attempting to load a ruleset that is not locked to its ruleset,
      still fallback to its own ruleset when the current one is incompatible
      osdn#41994
    * Already built buildings are purged from the worklist. They used to be
      just postponed osdn#41925
    * Terrain changing unit activities are cancelled when climate change
      changes tile terrain. With the new terrain the target of those actions
      is not what was started HRM#899919
    * Avoid endless loop with scenarios having bad starting positions HRM#767127

    * alien ruleset:
         + Ruleset gets correctly installed osdn#41828

    * civ2civ3 (default) ruleset:
         + Diplomats or Explorers establishing embassy are consumed in the process
           osdn#41929

    * sandbox ruleset:
         + Paradropping to transport is made possible osdn#41740
         + Added Mechanic unit that can fix certain other units osdn#41845

    * Europe 1900 WWI scenario:
         + Finnish city of Tammerfors renamed as Tampere osdn#41777

Changes affecting other rulesets / modders

    * When calculating action success chance, surviving tech requirements on
      World range are known to be known by everyone HRM#922369
    * Fixed scorelog start check to work correctly with ruleset set start year
      other than default HRM#820731
    * Fixed nuking non-native tiles with units that have zero attack_strength
      osdn#42008
    * Fixed server crash when illness destroys a city. That can happen only
      with rulesets that enable illness for size 1 cities osdn#41959
    * Server now checks that unit's transport can hold the target unit before
      converting unit HRM#921940

Changes affecting server operators

    * For servers with user authentication, supplied database.lua script uses
      lua instead of dirty sql query to determine time osdn#41879

General

    * Minor optimizations HRM#921195
    * Various internal changes which should only affect developers
      osdn#41759 osdn#41797 HRM#923036 HRM#922785 osdn#41850 osdn#41773 osdn#41858
      HRM#924387 osdn#41764 osdn#41852 HRM#923660 osdn#41772 HRM#923785 osdn#41873
      osdn#41847 osdn#41953 osdn#41992 osdn#41931 osdn#41927 osdn#42006 osdn#42007
      osdn#42010 osdn#41937 osdn#41964 osdn#42098 osdn#42099 osdn#42045 osdn#42053
      osdn#42101

AI

    * Better air unit handling HRM#924327
    * Better evaluate value of transports filled with cargo for the invasion attempt
      HRM#872215

Clients

    * User is now allowed to open a new action selection dialog while another
      is open osdn#41920
    * Fixed a governor crash when client does not know the other end of
      the trade route, but thinks it knows it osdn#41926
    * Buildings that allow units to perform actions are no longer shown
      as redundant osdn#41955
    * Client now knows that attacking a city with units like standard rulesets'
      Submarine is impossible osdn#42001
    * Fixed over-zealous assert when action selection gets cancelled osdn#42042
    * Client now logs about start of new turn on verbose log level osdn#41973

    * sdl2
         + Fixed screen refreshing when there's no active units osdn#41683

Tools
Ruledit

    * Made unit tech requirement menu easier to use osdn#41832
    * New editable properties:
         + Building build cost osdn#41891
         + Unit build cost osdn#41950
         + Description file reference osdn#41946
    * Allow only numbers to be entered for numeric requirement value osdn#41893
    * Prevented opening multiple Edit Values dialogs for the same ruleset item
      osdn#41951
    * Edit Values dialog related to it is closed when ruleset item is deleted
      osdn#41957
    * Other minor fixes osdn#41944 osdn#41945

Tilesets, Art, etc

    * Visible_Walls effects from City Walls and Great Wall are no longer
      cumulative in supplied rulesets, better supporting potential tilesets
      with multiple Wall graphics HRM#823341
    * Added icons for action_decision_want to most tilesets
      HRM#924321 HRM#924326 HRM#924388
    * Added Ancient Transport Hub graphics to amplio2 osdn#41868
    * conver_png script used to generate flag images updated to work with
      modern inkscape versions osdn#41884 osdn#42002
    * Fix to hexemplio format osdn#41923
    * Corrected/updated flag file formats
      osdn#41966 osdn#42005 osdn#42012 osdn#42016 osdn#42019 osdn#42023 osdn#42022
      osdn#42025 osdn#42027 osdn#42041 osdn#42050 osdn#42059 osdn#42065 osdn#42069
      osdn#42076 osdn#42080 osdn#42108 osdn#42115 osdn#42094 osdn#42123 osdn#42132
      osdn#42150

Help / Documentation

    * List Sveinung Kvilhaugsvik in present maintainers osdn#41820
    * Miscellaneous other improvements to in-game text and user documentation
      osdn#41712 osdn#41727 HRM#897730 HRM#892147 osdn#41826 HRM#811425 osdn#41969
      HRM#727155 osdn#41938 osdn#41962
    * Miscellaneous changes to developer/install/ruleset docs
      osdn#41776 osdn#41803 HRM#923438 osdn#41829 osdn#41872 osdn#41833 osdn#41887
      osdn#41935 osdn#41998 osdn#41943 osdn#42071 osdn#42017 osdn#42049 osdn#42061
      osdn#42158

Translations

    * Updated translations:
         + Complete translations: Russian
         + Incomplete translations:
           Catalan (92% core, 100% nations, 62% ruledit)
           Spanish (85% core, 100% nations, 44% ruledit)
           Finnish (100% core, 91% nations, 100% ruledit)
           French (99% core, 100% nations, 100% ruledit)
           Polish (99% core, 100% nations, 100% ruledit)
    * Changes to which strings are translatable osdn#41866

Build/portability

    * Updated bootstrap files from gnulib upstream
      osdn#41758 osdn#41754 osdn#41755 osdn#41843 osdn#41818 osdn#41830 osdn#41889
      osdn#41906 osdn#41999 osdn#42034
    * Fixed build of tex/threaded AI osdn#41870
    * Fixed compiler warnings seen with various setups
      HRM#921179 HRM#921208 HRM#923440 osdn#41905 osdn#41932 osdn#41890 osdn#42021
      osdn#42058
    * Fixed false positive when configure looks for moc-qt5 command osdn#41997
